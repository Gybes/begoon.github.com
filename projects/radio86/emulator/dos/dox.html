<HTML>
<HEAD>
<TITLE>Описание работы с эмулятором</TITLE>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css"></HEAD>

<BODY BGCOLOR="#FFFFFF" background="jpgs/exptextb.jpg">
<h2 align="center">Описание работы с эмулятором</h2>
<hr noshade>
<h4>Содержание</h4>
<ol>
  <li><a href="#startup">запуск эмулятора</a> <img src="gifs/new.gif" alt="new" align="absmiddle"></li>
  <li><a href="#basekeys">основные клавиши управления</a></li>
  <li><a href="#keyboard">клавиатура</a> 
    <ul>
      <li><a href="#pkmode"><font size="-1">режим 'РК'</font></a></li>
      <li><a href="#qwertymode"><font size="-1">режим 'QWERTY'</font></a></li>
    </ul>
  </li>
  <li><a href="#io">ввод/вывод с ленты</a> <img src="gifs/new.gif" alt="new" align="absmiddle"> 
    <ul>
      <li><a href="#in"><font size="-1">эмуляция ввода</font></a> <img src="gifs/new.gif" alt="new" align="absmiddle"></li>
      <li><a href="#out"><font size="-1">эмуляция записи</font></a></li>
    </ul>
  </li>
  <li><a href="#loading">как читались программы из коллекции</a> <img src="gifs/new.gif" alt="new" align="absmiddle"></li>
  <li><a href="#speed">cкорость</a></li>
  <li><a href="#menu">меню настроек</a> <img src="gifs/new.gif" alt="new" align="absmiddle"></li>
  <li><a href="#badopcodes">реакция на bad opcode</a></li>
  <li><a href="#modes">используемые режимы экрана</a></li>
  <li><a href="#debug">встроенный отладчик</a></li>
  <li><a href="#source">на чем весь этот опус написан</a></li>
  <li><a href="#snapshots">Snapshot'ы</a> <img src="gifs/new.gif" alt="new" align="absmiddle"><br>
    <ul>
      <li><a href="#snapsave"><font size="-1">запись snapshot'а</font></a> <img src="gifs/new.gif" alt="new" align="absmiddle"></li>
      <li><a href="#snapload"><font size="-1">чтение snapshot'а</font></a> <img src="gifs/new.gif" alt="new" align="absmiddle"></li>
      <li><a href="rss.html"><font size="-1">формат snapshot'ов RSS</font></a> 
        <img src="gifs/new.gif" alt="new" align="absmiddle"> </li>
    </ul>
  </li>
</ol>
<hr noshade>
<h4 align="center"> <a name="startup"></a>Запуск эмулятора <img src="gifs/new.gif" alt="new" align="absmiddle"><br>
</h4>
<p> Просто наберите 'PK86EMUL' (или 'PK86DBG'), сделав каталог с эмулятором ТЕКУЩИМ 
  или введите полный путь в исполняемому файлу эмулятора. В последнем случае текущий 
  каталог не обязательно должен быть рабочим каталогом эмулятора. 
<p>Если Вы работаете в Win9x/NT, то запускать эмулятор надо в ПОЛНОЭКРАННОМ режиме. 
  Для этого удобно сделать pif-файл (например, pk86emul.pif и pk86dbg.pif). 
<p>Вы можете в командной строке после имени файла эмулятора указать имя файла 
  snapshot'а, который будет загружен сразу после инициализации эмулятора. 
<p>Если Вы ассоциируете эмулятор с файлами snapshot'ов (например, по расширению 
  .RSS), то Вы сможете просто запускать snapshot'ы, и при этом эмулятор будет 
  вызываться автоматически. Если Вы используете Win9x/NT, то ассоциировать расширение 
  .RSS можно через 'explorer/проводник-&gt;open with/открыть с помощью', указав 
  путь в исполняемому файлу эмулятора. Те pif-файлы (pk86emul.pif и pk86dbg. pif), 
  которые Вы сделали раньше и которые находится в рабочем каталоге эмулятора, 
  запустят эмулятор в полноэкранном режиме.
<p> В nc/vc/dn ассоциации можно задавать через файл конфигурации с расширением 
  .EXT на маску *.RSS.
<hr>
<h4 align="center"> <a name="basekeys"></a>Основные клавиши управления эмулятором<br>
</h4>
<p><a name="keyESC"></a><a href="#menu">ESCAPE</a><br>
  ------<br>
  Вызов меню настроек эмулятора (<a href="#menu">глава &quot;Меню настроек эмулятора&quot;</a>). 
<p><a name="keyF5"></a>F5<br>
  --<br>
  Включить/выключить звук. 
<p><a name="keyF6"></a>F6<br>
  --<br>
  Включить/выключить отображение курсора (это иногда полезно в некоторых<br>
  играх, например, в <a href="volcano.html">&quot;Спасателе&quot;</a>). 
<p><a name="keyF7"></a>F7<br>
  --<br>
  Перезапуск эмулятора в режиме 16 кб с очисткой памяти. 
<p><a name="keyF8"></a>F8<br>
  --<br>
  Перезапуск эмулятора в режиме 32 кб с очисткой памяти. 
<p><a name="keyF9"></a>F9<br>
  --<br>
  Включить/выключить бордюр, показывающий границу &quot;официальной&quot; (используемой 
  &quot;Монитором&quot; для вывода) части экранной области. Это иногда тоже полезно, 
  например, в том же <a href="volcano.html">&quot;Спасателе&quot;</a>, чтобы понять 
  &#150; почему же он не летит ЕЩЕ вверх ?! <img src="gifs/smile.gif" alt="smile" align="absmiddle"><br>
  Данный бордюр ВСЕГДА имеет размер 64x25 и имеет смысл ТОЛЬКО в стандартном режиме 
  экрана 64x25 (<a href="#modes">глава &quot;Режимы Экрана&quot;</a>). 
<p><a name="keyF10"></a>F10<br>
  ---<br>
  Выход из эмулятора. 
<p><a name="keyF11"></a>F11<br>
  ---<br>
  Аналог кнопки RESET на РК, то есть рестарт эмулятора в текущем режиме БЕЗ очистки 
  памяти. 
<p><a name="keyF12"></a><a href="#debug">F12</a><br>
  ---<br>
  Вызов <a href="#debug">встроенного отладчика</a>. 
<p><a name="keyNUMLOCK"></a><a href="#kbdtable">NumLock</a><br>
  -------<br>
  Помощь по <a href="#kbdtable">раскладке клавиатуры</a> в режиме 'РК'. 
<p><a name="GreyPlus"></a>Grey '+'<br>
  --------<br>
  Вывод таблицы символов РК. 
<hr noshade>
<h4 align="center"><br>
  <a name="keyboard"></a>Клавиатура<br>
</h4>
<p> Начиная с версии эмулятора 0.2, клавиатура РК может эмулироваться в двух режимах 
  &#150; 'РК' и 'QWERTY'. Переключение между режимами происходит нажатием клавиши 
  ScrollLock. Индикатор ScrollLock на клавиатуре показывает режим текущий режим 
  клавиатуры &#150; НЕ горит в режиме 'QWERTY', а зажигается<br>
  в режиме 'РК'. Режим клавиатуры 'QWERTY' является режимом по умолчанию.
<p> Эмулятор не требует наличия загруженного до него какого-либо резидентного 
  русификатора или драйвера русских шрифтов, так как эмулятор сам устанавливает 
  нужные ему шрифты, а переключение между алфавитами происходит клавишей L/CTRL.
<p> Индикатор CapsLock на клавиатуре в обоих режимах работы клавиатуры индицирует 
  текущую раскладку &#150; РУС или ЛАТ.
<h4 align="center"><br>
  <a name="pkmode"></a>Режим 'РК' клавиатуры<br>
</h4>
<p> В режиме 'РК' устанавливается прямое соответствие клавиш на клавиатуре QWERTY 
  клавишам РК без всякой перекодировки. В этом режиме клавиши расположены так, 
  как они располагались на РК. Этот режим не удобен для набора текста в эмуляторе, 
  но бывает полезен в некоторых игровых программах, так как в них клавиши управления 
  стрельбой/передвижениями/etc могут выбираться с расчетом на их расположения 
  на клавиатуре РК. Помощь по раскладке клавиатуры в режиме 'РК' можно всегда 
  вызвать в эмуляторе клавишей <a href="#kbdtable">NumLock</a>. В режиме 'РК' 
  большинство латинских букв находится над соответствующими русскими, но не все. 
  Вкратце, система такая &#150; если хотите набрать русскую букву, то переключаетесь 
  через РУС/ЛАТ (клавиша L/CTRL) в русский режим или удерживаете клавишу УС (L/ALT) 
  и нажимаете клавишу с соответствующей ей русской буквой по стандартной раскладке 
  'QWERTY', а если ходите набрать латинскую букву, то нажмите клавишу, с русской 
  буквой, которой соответствует нужная Вам латинская буква. Этот &quot;принцип&quot; 
  верен для всех латинских букв, кроме Y, W, V, Q, и X &#150; клавиши для них 
  надо просто запомнить <img src="gifs/smile.gif" alt="smile" align="absmiddle"> 
  или смотреть по <a href="#kbdtable">NumLock'у</a>. Короче &#150; те, кто знаком 
  был с клавиатурой РК все поймут <img src="gifs/smile.gif" alt="smile" align="absmiddle">. 
<p> Ниже приводится содержание файла KEYBOARD.HLP, которое также можно посмотреть 
  в эмуляторе по клавише NumLock. Здесь сверху пара букв изображают клавиши РК, 
  и под каждой парой (через пустую строку) приводится нужная клавиша на стандартной 
  клавиатуре 'QWERTY'. Слово 'PAD' означает, что используется клавиша с расширенной 
  части клавиатуры.
<p align="center"> <a name="kbdtable"></a><img src="gifs/kbdhelp.gif" usemap="#keyboard" alt="Раскладка клавиатуры" border="0"> 
<h4 align="center"><br>
  <a name="qwertymode"></a>Режим 'QWERTY' клавиатуры<br>
</h4>
<p> В этом режиме Вы пользуетесь стандартным расположением клавиш на клавиатуре 
  QWERTY. Но в этом режиме Вы можете вводить НЕ ВСЕ символы РК. В этом режиме 
  Вы можете вводить:
<ul>
  <li> цифры <font face="Courier New, Courier, mono">1234567890</font>, а нажимая 
    цифры с SHIFT'ом получите символы <font face="Courier New, Courier, mono">!@#$%^&amp;*()</font></li>
  <li> символы <font face="Courier New, Courier, mono">-=;',./</font> и соответствующие 
    им с SHIFT'ом <font face="Courier New, Courier, mono">:&quot;&lt;&gt;?_+</font></li>
  <li> символы <font face="Courier New, Courier, mono">[]\</font></li>
  <li> символы ABCDEFGHIJKLMNOPQRSTUVWXYZ</li>
  <li> символы АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ, переключившись в русский режим 
    клавишей L/CTRL</li>
  <li> клавиши Ф1-Ф4 соответствуют клавишам F1-F4 соответственно</li>
  <li> клавиша ВК соответствует клавише ENTER</li>
  <li> клавиша ПС соответствует клавишам SHIFT+ENTER</li>
  <li> клавиша СТР соответствует клавише PGUP</li>
  <li> клавиша \ (стрелка влево-вверх) соответствует клавише Home</li>
  <li> клавишам-стрелкам соответствуют клавиши UP, DOWN, <font face="Courier New, Courier, mono">&lt;-</font> 
    и <font face="Courier New, Courier, mono">-&gt;</font> соответственно</li>
  <li>клавиша АР2 соответствует клавише PAD-5</li>
</ul>
<p> Если Вам необходимо ввести какой-либо другой код, то воспользуйтесь режимом 
  'РК' эмуляции клавиатуры.
<p> Переключение между русским и латинским алфавитом в этом режиме клавиатуры 
  происходит клавишей L/CTRL.<br>
  Клавиша SHIFT не влияет на текущую раскладку клавиатуры (РУС или ЛАТ). Слово 
  'PAD' означает, что используется клавиша с расширенной части клавиатуры.
<p align="center"><br>
  <em>ЗАМЕЧАНИЕ</em> 
<p><br>
  Для игровых программ, где требуется динамичное реагирование эмулятора на нажатие 
  клавиш, лучше пользоваться режимом клавиатуры 'РК'. Возможность одновременного 
  нажатия на две или более клавиш (например, в Спасателе &#150; лететь и стрелять) 
  в ОБОИХ режимах работы клавиатуры определяется устройством клавиатуры РК. Вот 
  группы клавиш, чье одновременное нажатие может быть отработано в РК и, ледовательно, 
  в эмуляторе (в раскладке РК, естественно):
<ol start="0">
  <li> стрелка влево-вверх, СТР, АР2, Ф1, Ф2, Ф3, Ф4</li>
  <li> пробел, ^, ], \, [, Z, Y, X</li>
  <li> W, V, U, T, S, R, Q, P</li>
  <li> O, N, M, L, K, J, I, H</li>
  <li> G, F, D, C, B, A, @</li>
  <li> /, ., -, ,, ;, :, 9, 8</li>
  <li> 7, 6, 5, 4, 3, 2, 1, 0</li>
  <li>UP, <font face="Courier New, Courier, mono">-&gt;</font>, DOWN, <font face="Courier New, Courier, mono">&lt;-</font>, 
    ЗБ, ВК, ПС, ТАБ</li>
</ol>
<hr>
<h4 align="center"><br>
  <a name="io"></a>Ввод/вывод с ленты <img src="gifs/new.gif" alt="new" align="absmiddle"><br>
</h4>
<p> При эмуляции ввода/вывода используется каталог TAPE16 для режима 16кб и TAPE32 
  для режима 32кб.<br>
  Эмуляция ввода/вывода происходит на основе перехвата процедур &quot;Монитора&quot; 
  ввода и вывода байта на магнитофон, и далее слова 'ввод/вывод' применяются в 
  смысле вызова программами этих подпрограмм.<br>
  Блок эмуляции ввода/вывода работает с файлами-image'ами, которые представляют 
  собой ТОЧНУЮ байтовую копию того, что находится на ленте, ВКЛЮЧАЯ ВСЕ синхробайты. 
<p> <img src="gifs/new.gif" alt="new" align="absmiddle"> Начиная с <a href="news.html">версии 
  0.5</a> в эмуляторе поддерживается формат файлов эмулятора EMU80 Виктора Пыхонина. 
  Этот формат также представляет собой байтовую копию того, что находится на ленте, 
  но БЕЗ самого первого синхробайта. При испрользовании файлов от эмулятора EMU80 
  есть незначительные ограничения. Более подробно об этом &#150; в '<a href="#inrem">Замечании</a>' 
  в главе &quot;<a href="#in">Эмуляция ввода</a>&quot;. 
<p>При вводе имен файлов для операции чтения (подглава &quot;<a href="#in">Эмуляция 
  ввода</a>&quot;) Вы сами должны выбирать файлы в зависимости от того, в какой 
  ситуации Вы проводите ввод. Например, если Вы на команду &quot;Монитора&quot; 
  'I' подставите image-файл от редактора Микрон, то, естественно, получите ошибку 
  ввода. Я предлагаю просто присваивать файлам-image'ам соответствующие расширения 
  и определять тип файла по ним. Вот то, что использую я: 
<ul>
  <li>*.PKI &#150; image, сделанный командой 'O' &quot;Монитора&quot; или dump-файл, 
    сделанный<br>
    из встроенного отладчика в режиме 'Monitor file'<br>
    <br>
  </li>
  <li>*.GAM &#150; файлы с таким расширением полностью идентичны файлам .PKI, 
    и данное расширение введено только для удобного поиска игр среди остальных 
    программ<br>
    <br>
  </li>
  <li> *.BSM &#150; файл, сохраненный из Бейсика-Микрон в режиме 'с именем'<br>
    <br>
  </li>
  <li> *.BSS &#150; файл, сохраненный из Бейсика-Микрон в режиме 'без с имени', 
    или из любого другого Бейсика<br>
    <br>
  </li>
  <li> *.EDM &#150; файл, сохраненный из Редактора-Микрон<br>
    <br>
  </li>
  <li> *.BIN &#150; dump-файл, сделанный из встроенного отладчика в режиме 'Dump'</li>
</ul>
<p><img src="gifs/new.gif" alt="new" align="absmiddle"> Начиная с версии эмулятора 
  <a href="news.html">0.5</a> добавились еще рабочие расширения:</p>
<ul>
  <li>*.RSS &#150; файл-snapshot</li>
  <li> *.RK &#150; файл эмулятора EMU80</li>
  <li> *.RKR &#150; также файл эмулятора EMU80</li>
</ul>
<p align="center"><em><img src="gifs/new.gif" alt="new" align="absmiddle"> ЗАМЕЧАНИЕ</em></p>
<p align="left"> Как при записи и чтении файлов, так и при записи и чтении snapshot'ов, 
  Вы используете экран выбора файла. Количество отображаемых файлов неограничено. 
  Клавиши навигации при выборе имени файла:</p>
<table width="100%">
  <tr>
    <td width="41%">HOME</td>
    <td width="59%">в начало каталога</td>
  </tr>
  <tr>
    <td width="41%">END</td>
    <td width="59%">в конец каталога</td>
  </tr>
  <tr>
    <td width="41%">CTRL-HOME, CTRL-PGUP</td>
    <td width="59%">в начало текущего экрана</td>
  </tr>
  <tr>
    <td width="41%">CTRL-END, CTRL-PGDN</td>
    <td width="59%">в конец текущего экрана</td>
  </tr>
  <tr>
    <td width="41%">LEFT </td>
    <td width="59%">на один файл влево</td>
  </tr>
  <tr>
    <td width="41%">RIGHT</td>
    <td width="59%">на один файл вправо</td>
  </tr>
  <tr>
    <td width="41%">PGUP</td>
    <td width="59%">на один экран вверх</td>
  </tr>
  <tr>
    <td width="41%">PGDN</td>
    <td width="59%">на один экран вниз</td>
  </tr>
</table>
<p> Алфавитно-цифровые клавиши приведут в быстрому поиску и навигации по именам 
  файлов в каталоге.</p>
<p> Строки <code>&quot;........&quot;</code> в начале и/или в конце экрана означают, 
  что на экране изображены имена не всех файлов каталога, и Вы можете &quot;прокрутить&quot; 
  экран вверх/вниз клавишами навигации.</p>
<p></p>
<h4 align="center"><br>
  <a name="in"></a>Эмуляция ввода <img src="gifs/new.gif" alt="new" align="absmiddle"><br>
</h4>
<p> При вызове программой пользователя подпрограммы &quot;Монитора&quot; ввода 
  байта с магнитофона происходит запрос на имя файла, откуда проводить ввод. Далее 
  все последующее вызовы подпрограммы чтения байта будут получать данные последовательно 
  из УКАЗАННОГО файла то тех пор, ПОКА ОН НЕ КОНЧИТСЯ.
<p> По его окончании снова будет запрос на имя файла. Если поступил запрос на 
  ввод с поиском синхробайта, то, если уже активен некоторый файл для ввода, будет 
  найден в нем первый синхробайт (0E6h), начиная от текущей позиции, и если он 
  НЕ будет найдет в текущем файле, то это будет рассмотрено как ошибка ввода. 
  В случае успешного ввода байта с поиском с синхробайтом все дальнейшее чтение 
  из текущего файла ввода (пока он не кончится) будет проводиться с позиции, следующей 
  за введенным с поиском синхробайта байтом. 
<p> Данная система позволяет &quot;сливать&quot; несколько исходных файлов (логических 
  блоков) в один простым копированием, и уже при вводе из полученного результирующего 
  файла запроса на ввод имени не будет до тех под, пока все логические блоки из 
  этого файла не будут считаны.
<p align="center"><em><a name="inrem"></a>ЗАМЕЧАНИЕ <img src="gifs/new.gif" alt="new" align="absmiddle"></em></p>
<p> При вводе из файлов эмулятора EMU80 процедура ввода имеет некоторые особенности. 
  Файл эмулятора EMU80 может содержать только один логический блок данных РК. 
  Это значит, что после чтения ПЕРВОГО логического блока из файла эмулятора EMU80 
  в этом файле остались неиспользованные (несчитанные) байты, то при очередном 
  запросе на чтение байта с поиском синхробайта эмулятор начнет считывать именно 
  эти байты. Если эти байты являются неиспользуемым &quot;мусором&quot;, то скорее 
  всего будет ошибка ввода, и уже при следующем запросе на ввод с поиском синхробайта 
  произойдет запрос имени исходного файла.</p>
<p></p>
<h4 align="center"><br>
  <a name="out"></a>Эмуляция записи<br>
</h4>
<p> При вызове программой пользователя подпрограммы &quot;Монитора&quot; вывода 
  байта на магнитофон, происходит запрос на имя файла &#150; КУДА проводить вывод, 
  - и все последующие вызовы этой подпрограммы будут записывать данные в указанный 
  файл. Пауза более чем в 5 секунд между вызовами подпрограммы записи байта расценивается 
  как конец файла, и при уже новом вызове подпрограммы записи байта будет новый 
  запрос на имя файла для записи. Этот интервал времени измеряется между ОКОНЧАНИЕМ 
  записи предыдущего байта и началом записи нового, так что медленные устройства 
  ввода/вывода типа дискеты не влияют на процедуру записи и НЕ &quot;сбивают&quot; 
  ее.
<p> Данная схема эмуляции ввода/вывода успешно работает со всеми программами под 
  РК, что у меня есть &#150; Монитор, Бейсик и Редактор Микрон, Бейсик-Сервис.
<p> Если у Вас с какой-то программой ввод/вывод в эмуляторе не работает, то пришлите 
  мне эту программу (ссылка на Вас будет, конечно, сохранена), и я попытаюсь что-нибудь 
  сделать <img src="gifs/smile.gif" alt="smile" align="absmiddle">. 
<p> Единственное ограничение &#150; не делайте вывод двух РАЗНЫХ файлов с интервалом 
  менее 5 секунд (то есть, например, не пользуйтесь командой &quot;Монитора&quot; 
  'O' чаще чем через 5 секунд <img src="gifs/smile.gif" alt="smile" align="absmiddle">, 
  а то оба эти файла сольются в один. Конечно, Вы сможете их потом прочитать в 
  эмуляторе, но ТОЛЬКО последовательно. 
<p> Хоть все и так знают, но я все-таки приведу формат файлов &quot;Монитора&quot; 
  (стартовый и конечный адреса и контрольная сумма хранятся в формате little-endian, 
  то есть сначала старший байт, в затем младший):
<p>&nbsp;
<table width="100%">
  <tr>
    <td width="11%">E6</td>
    <td width="89%">синхробайт</td>
  </tr>
  <tr>
    <td width="11%">XX XX</td>
    <td width="89%">начальный адрес файла</td>
  </tr>
  <tr>
    <td width="11%">XX XX</td>
    <td width="89%"> конечный адрес файла</td>
  </tr>
  <tr>
    <td width="11%">.....</td>
    <td width="89%">данные файла</td>
  </tr>
  <tr>
    <td width="11%">00 00</td>
    <td width="89%">junk (может и отсутствовать)</td>
  </tr>
  <tr>
    <td width="11%">E6 </td>
    <td width="89%">синхробайт</td>
  </tr>
  <tr>
    <td width="11%">XX XX</td>
    <td width="89%"> контрольная сумма</td>
  </tr>
</table>
<p>В принципе, два нуля перед контрольной суммой роли не играют, так как при вводе 
  они пропускаются при вводе первого байта контрольной суммы в режиме &quot;с 
  поиском синхробайта&quot;.</p>
<p> Форматы файлов Бейсиков, Редактора или Музыкальной системы я приводить не 
  буду &#150; нет желания в них копаться &#150; желающие сами разберутся.</p>
<hr noshade>
<h3 align="center"><a name="loading"></a>Как читались в ленты программы из коллекции<br>
</h3>
<p> С ленты все читалось выдранным с Синклера компаратором (ну не люблю я пассивные 
  схемы <img src="gifs/smile.gif" alt="smile" align="absmiddle"> и программой, 
  сделанной на основе, естественно, подпрограммы &quot;Монитора&quot;. Есть еще 
  супер-программа RRKWIN32.EXE из комплекта эмулятора EMU80. С помощью нее Вы 
  может считать даже совсем &quot;убитые&quot; кассеты. Причем делается это просто 
  через Вам SoundBlaster без всяких дополнительных устройств. Спасибо Виктору 
  Пыхонину.</p>
<hr>
<h4 align="center"><br>
  <a name="speed"></a>Скорость<br>
</h4>
<p> Скорость работы эмулятора пока НИКАК не подгоняется под оригинал &#150; уж сколько 
  получите Вы на своем компьютере, столько получите. Для примера скажу, что на 
  моем p200/mmx все работает примерно ~2.5 раза быстрее &quot;родного&quot; РК.<br>
  Вы можете замедлять работу эмулятора, регулируя в отладчике задержку (<a href="debug.html#delay">глава 
  &quot;Задержка&quot;</a>). Также Вы можете менять эту задержку через меню настроек, 
  вызываемого по ESCAPE'у.<br>
  По умолчанию задержка равна 1. Задержка 1 является минимальной, при которой 
  сохраняется &quot;<a href="commands.html">растактовка</a>&quot; команд i8080 
  (по tick'ам). При 0 Вы получите максимальную скорость, но время выполнения команд 
  будет не<br>
  сбалансировано, относительно документации на i8080. Увеличивая задержку, Вы 
  можете замедлять эмулятор.<br>
  На моем p200/mmx, как я уже говорил, при задержке 1 эмулятор работает в ~2.5 
  раза быстрее &quot;родного&quot; РК.
<hr noshade>
<h4 align="center"><br>
  <a name="menu"></a>Меню настроек <em><img src="gifs/new.gif" alt="new" align="absmiddle"></em><br>
</h4>
<p> Меню настроек вызывается по ESPCAPE'у в эмуляторе. Здесь Вы увидите текущее 
  состояние эмулятора и сможете менять его настройки. В этом меню Вы можете:
<ul>
  <li> менять задержку работы эмулятора (<a href="#speed">глава &quot;Скорость&quot;</a>)</li>
  <li> управлять активностью бордюра, курсора, звука</li>
  <li> управлять реакцией эмулятора на выполнение 'bad opcodes' (<a href="#badopcodes">глава 
    &quot;Выполнение bad opcodes&quot;</a>)</li>
  <li> менять режим работы эмулятора (16 или 32 кб)</li>
  <li> посмотреть помощь по клавиатуре для режима 'РК' и таблицу символов РК</li>
  <li>управлять работой эмулятора со <a href="#snapshots">snapshot'ами</a> <em><img src="gifs/new.gif" alt="new" align="absmiddle"></em></li>
  <li>записывать и считывать <a href="#snapshots">snapshot'ы</a> <em><img src="gifs/new.gif" alt="new" align="absmiddle"></em></li>
  <li> управлять выводом информмации о загруженном <a href="#snapshots">snapshot'е</a> 
    <em><img src="gifs/new.gif" alt="new" align="absmiddle"></em> </li>
  <li> управлять возможностью автоматической записи и чтения конфигурации эмулятора 
    <em><img src="gifs/new.gif" alt="new" align="absmiddle"></em> </li>
  <li>записывать и считывать конфигурацию эмулятора вручную <em><img src="gifs/new.gif" alt="new" align="absmiddle"></em></li>
  <li> посмотреть информацию от программе</li>
  <li>выйти из эмулятора</li>
</ul>
<hr noshade>
<h4 align="center"><br>
  <a name="badopcodes"></a>Реакция на bad opcode<br>
</h4>
<p> При попытке выполнить недопустимую операцию процессора i8080 эмулятор поступает 
  по разному.<br>
  Если в меню настроек флаг 'КОНТРОЛЬ bad opcodes' в состоянии ВКЛ, то при выполнении 
  недопустимой команды получает управление отладчик и далее Вы сами решаете, что 
  делать (можно, например, нажать F1 и перезапустить Монитор). Если отладчик недоступен 
  (Вы запустили эмулятор без встроенного отладчика), то поведение эмулятора будет 
  аналогично выполнению команды HLT. Перезапустить эмулятор в этом случае можно, 
  например, клавишей <a href="#keyF11">RESET (F11)</a>.<br>
  А если в меню настроек флаг 'КОНТРОЛЬ bad opcodes' в состоянии [X], то эмулятор 
  просто игнорирует этот 'bad opcode' и начинает выполнение следующей за ним инструкции. 
<hr noshade>
<h4 align="center"><br>
  <a name="modes"></a>Используемые режимы экрана<br>
</h4>
<p> Режим экрана эмулятора выбирается в зависимости от настроек ПДП и ВГ-75. Размер 
  строки ВСЕГДА 78 символов. Количество строк на экране может быть 30, 43 или 
  50, в зависимости от того, на сколько строк прикладная программы настроила ПДП 
  и ВГ-75. Несмотря на то, что ВГ-75 поддерживает максимально 64 строки на экране 
  &#150; в эмуляторе максимальное количество строк на экране равняется 50.
<hr noshade>
<h4 align="center"><br>
  <a name="debug"></a>Встроенный отладчик<br>
</h4>
<p> Встроенный отладчик вызывается клавишей <a href="#keyF12">F12</a>. В релизе 
  эмулятора есть два исполняемых файла &#150; СО встроенным отладчиком (PK86DBG) 
  и БЕЗ него (PK86EMUL). Версия без отладчика включена для владельцев медленных 
  машин (у меня на p200 и с отладчиком эмулятор работает раза в ~2.5 быстрее родного 
  РК).<br>
  Пока, встроенный отладчик весьма сильно замедляет работу эмулятора в целом, 
  поэтому приходиться включать в релиз две версии эмулятора. Так что если хотите 
  поломать игрушки, то надо найти машину пошустрее <img src="gifs/smile.gif" alt="smile" align="absmiddle">.
<p>Более подробное описание отладчика <a href="debug.html">здесь</a>.
<hr noshade>
<h4 align="center"><br>
  <a name="source"></a>На чем весь этот опус написан<br>
</h4>
<p> От первоначальной идеи писать все ассемблере я отказался, решив, что в данном 
  случае лучше положиться на быструю машину (ведь p5 сейчас де факто) и на оптимизатор 
  компилятора <img src="gifs/smile.gif" alt="smile" align="absmiddle">, и тем самый получить возможность ввести в эмулятор побольше 
  функциональных наворотов, не тратя на это уйму времени, а не на собственный 
  кодинг на ассемблере. Итак &#150; язык С.<br>
  Версия эмулятора 0.1 собрана под Borland C++ 3.1, а 0.2 и выше &#150; BC++ 5.0. 
<hr>
<h4 align="center"><a name="snapshots"></a>Snapshot'ы <em><img src="gifs/new.gif" alt="new" align="absmiddle"></em><br>
</h4>
<p> Начиная с версии <a href="news.html">0.5</a> в эмулятор введена поддержка 
  так называемых snapshot'ов, то есть возможность сохранять и в дальнейшем загружать 
  образы памяти, состояния процессора и состояния внешних устройств, что позволяет 
  &quot;отложить&quot; выполнений какой-либо программы и восстановить ее сохраненное 
  рабочее состояние позже.</p>
<p> Формат snapshot'ов <a href="rss.html">RSS</a>, которой сейчас поддерживается 
  в эмуляторе, был предложен Виктором Пыхониным автором эмулятора EMU80) как универсальный 
  формат для обмена данными между различными эмуляторами. </p>
<p>Для конвертации обычного бинарного файла в файл snapshot'а RSS можно воспользоваться 
  утилитой BIN2RSS.EXE из комплекта эмулятора EMU80. Описание формата приводится 
  <a href="rss.html">здесь</a>.</p>
<p> Итак, что же Вы можете делать со snapshot'ми в этом эмуляторе ?! ...</p>
<hr>
<h4 align="center"><a name="snapsave"></a>Запись snapshot'а <em><img src="gifs/new.gif" alt="new" align="absmiddle"></em><br>
</h4>
<p> При записи snapshot'а кроме образа памяти, состояния процессора и внешних 
  устройств, Вы можете сохранить текущую конфигурацию эмулятора и текущий образ 
  Монитора. По умолчанию snapshot'ы компрессируются, и если Вы хотите исследовать 
  сохраненный образ памяти, состояние процессора и внешних устройств, то отключив 
  компрессию в меню &quot;<a href="#menu">Настройки</a>&quot; Вы получите &quot;чистое 
  изображение&quot; информации.</p>
<hr>
<h4 align="center"><a name="snapload"></a>Чтение snapshot'ов <em><img src="gifs/new.gif" alt="new" align="absmiddle"></em><br>
</h4>
<p> При чтении файла snapshot'а, Вы можете получите полную информацию о содержимом 
  этого snapshot'а, извлекаемую из его <a href="rss.html">заголовков</a>. Отключить 
  вывод этой информации можно в меню &quot;<a href="#menu">Настройки</a>&quot;. 
  Если snapshot был сделан на клоне РК, но НЕ на РК, то он, конечно, будет считан, 
  но работа сохраненной программы, естественно, не гарантируется.</p>
<p>&nbsp;
<hr>
<p align="center">Если Вы обнаружили какие-либо ошибки или неточности, то пишите 
  мне на<a href="mailto:alexander@demin.ws"> <img src="gifs/email.gif" border="0" align="absmiddle" alt="Пишите мне"></a>. 
<p align="right"><a href="index.html"><img src="gifs/back1.gif" border="0" alt="back"></a>
<map name="keyboard">
  <area shape="rect" coords="559,65,631,77" href="#keyF10" alt="Клавиша F10">
  <area shape="rect" coords="383,64,545,78" href="#keyNUMLOCK" alt="Клавиша NumLock">
  <area shape="rect" coords="193,65,369,77" href="#keyF8" alt="Клавиша F8">
  <area shape="rect" coords="1,65,176,78" href="#keyF7" alt="Клавиша F7">
  <area shape="rect" coords="449,33,577,46" href="#keyESC" alt="Клавиша ESC">
  <area shape="rect" coords="335,33,432,46" href="#keyF12" alt="Клавиша F12">
  <area shape="rect" coords="249,33,319,45" href="#keyF11" alt="Клавиша F11">
  <area shape="rect" coords="161,34,235,45" href="#keyF9" alt="Клавиша F9">
  <area shape="rect" coords="72,33,143,45" href="#keyF6" alt="Клавиша F6">
  <area shape="rect" coords="0,33,58,46" href="#keyF5" alt="Клавиша F5">
  <area shape="rect" coords="247,1,375,14" href="news.html" alt="Новости о версии 0.5">
</map>
</BODY>
</HTML>
