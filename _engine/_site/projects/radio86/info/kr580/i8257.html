<link rel="stylesheet" href="default.css" type="text/css" />

<h1>Контроллер прямого доступа к памяти КР580ИК57 (КР580ВТ57)</h1>
<a href="http://www.computer-museum.ru/technlgy/ik57.htm">Оригинал статьи</a>.
<h3>(Отечественный аналог Intel i8257)</h3>
<p>Вадим Кудрявцев</p>
<p>Обменом данными в компьютере при классическом его построении заведует процессор. Однако такую задачу, как обмен данными с периферийными устройствами (т. е. при осуществлении связи с внешним миром), стараются по возможности выполнить при помощи специализированных устройств обмена информацией. Это позволяет, с одной стороны, освободить процессор (а заодно и программиста) от выполнения данной задачи, с другой - произвести требуемый обмен данными с большей скоростью, чем это мог бы сделать процессор. Ведь периферийные устройства способны работать со скоростью, сравнимой с быстродействием процессора. К таким устройствам относятся, к примеру, контроллер дисплея или накопители на гибком или жестком магнитных дисках. Все они требуют наличия в системе так называемого контроллера прямого доступа к памяти, позволяющего заменить процессор и организовать более быстрый и прямой обмен данными между памятью и заданным периферийным устройством.</p>
<p>В серии К580 выпускался контроллер алфавитно-цифрового дисплея КР580ИК57. Микросхема представляет собой БИС четырехканального программируемого контроллера прямого доступа к памяти (ПДП). Каждый из четырех каналов адресует область внешней памяти путем инкрементирования выбранного адреса. ПДП имеет приоритетную логику, реализующую запросы от четырех периферийных устройств и производит счет циклов прямого доступа к памяти каждого канала.</p>
<p>Использование БИС ПДП позволяет существенно сократить аппаратные затраты при реализации прямого доступа к памяти.</p>
<p>На рис. 1 приведена структурная схема КР580ИК57, в табл. 1 - назначение выводов.</p>

<div ><IMG SRC="i8257.gif" width=499 height=430 BORDER=0 alt="Структура микросхемы КР580ИК57"><p><strong>Рис. 1. Структура микросхемы КР580ИК57</strong></p></div>


<p>Таблица 1. Назначение выводов</p>

<table cellspacing="0"  >
<tr>
<th valign="top">
Номер вывода
</th>
<th valign="top">
Обозначение
</th>
<th valign="top">
Тип
</th>
<th valign="top">
Описание
</th>
</tr>
<tr>
<td valign="top">
1
</td>
<td valign="top">
Чт В/В<br>
(I/O R)</td>
<td valign="top">
Вход/выход
</td>
<td valign="top">
Чтение ввода-вывода. Сигнал Чт В/В разрешает (во входном режиме) чтение 8-разрядного регистра состояния или записанных в ЗУ ПДП начального адреса и числа циклов ПД любого из каналов, в выходном режиме сигнал Чт В/В разрешает выдачу информации из внешнего устройства ввода-вывода
</td>
</tr>
<tr>
<td valign="top">
2
</td>
<td valign="top">
Зп В/В<br>
(I/O W)</td>
<td valign="top">
Вход/выход
</td>
<td valign="top">
Запись ввода-вывода. Сигнал Зп В/В разрешает (во входном режиме) загрузку регистров установки режимов, начального адреса значения количества циклов для любого канала ПДП. В выходном режиме сигнал Зп В/В разрешает запись информации во внешнее устройство ввода-вывода
</td>
</tr>
<tr>
<td valign="top">
3
</td>
<td valign="top">
Чт П<br>
(MEMR)</td>
<td valign="top">
Выход
</td>
<td valign="top">
Чтение памяти. Выходной сигнал ЧтП предназначен для внешнего ЗУ
</td>
</tr>
<tr>
<td valign="top">
4
</td>
<td valign="top">
Зп П<br>
(MEMW)</td>
<td valign="top">
Выход
</td>
<td valign="top">
Запись в память. Выходной сигнал ЗпП предназначен для внешнего ЗУ
</td>
</tr>
<tr>
<td valign="top">
5
</td>
<td valign="top">
М128<br>
(MARK)</td>
<td valign="top">
Выход
</td>
<td valign="top">
Модуль 128. Выходной сигнал М128 появляется в каждом 128-м цикле от конца массива, а также во время действия сигнала КС
</td>
</tr>
<tr>
<td valign="top">
6
</td>
<td valign="top">
Гт<br>
(Ready)</td>
<td valign="top">
Вход
</td>
<td valign="top">
Готовность. Входной сигнал Гт предназначен для обеспечения совместной работы ПДП и медленных внешних устройств. Сигнал может поступать асинхронно. Он отражает готовность внешнего устройства к ведению обмена
</td>
</tr>
<tr>
<td valign="top">
7
</td>
<td valign="top">
ПЗхв<br>
(HLDA)</td>
<td valign="top">
Вход
</td>
<td valign="top">
Подтверждение захвата. Входной сигнал ПЗхв является ответом МП на сигнал ЗЗхв. При появлении ПЗхв системные шины (линии) свободны
</td>
</tr>
<tr>
<td valign="top">
8
</td>
<td valign="top">
СтрА<br>
(ADSTB)</td>
<td valign="top">
Выход
</td>
<td valign="top">
Строб адреса. Выходной сигнал СтрА указывает, что на шине данных выдан старший байт адреса внешнего ЗУ
</td>
</tr>
<tr>
<td valign="top">
9
</td>
<td valign="top">
РА<br>
(AEN)</td>
<td valign="top">
Выход
</td>
<td valign="top">
Разрешение адреса. Выходной сигнал РА используется для блокировки адресных шин в невыбранных устройствах
</td>
</tr>
<tr>
<td valign="top">
10
</td>
<td valign="top">
ЗЗхв<br>
(HRQ)</td>
<td valign="top">
Выход
</td>
<td valign="top">
Запрос захвата. Выходной сигнал ЗЗхв запрашивает у МП разрешение на управление системными шинами (линиями)
</td>
</tr>
<tr>
<td valign="top">
11
</td>
<td valign="top">
ВМ<br>
(CS)</td>
<td valign="top">
Вход
</td>
<td valign="top">
Выбор микросхемы. Входной сигнал ВМ позволяет активизировать данную БИС
</td>
</tr>
<tr>
<td valign="top">
12
</td>
<td valign="top">
ТИ<br>
(CLK)</td>
<td valign="top">
Вход
</td>
<td valign="top">
Тактовый импульс. Входной сигнал ТИ обеспечивает функционирование микросхемы. Обычно этим сигналом является сигнал Ф2 микропроцессора КР580ИК80А
</td>
</tr>
<tr>
<td valign="top">
13
</td>
<td valign="top">
Уст<br>
(RESET)</td>
<td valign="top">
Вход
</td>
<td valign="top">
Установка. Входной сигнал Уст предназначен для установки схемы в исходное состояние
</td>
</tr>
<tr>
<td valign="top">
14
</td>
<td valign="top">
ППД2<br>
(DACK2)</td>
<td valign="top">
Выход
</td>
<td valign="top">
Подтверждение прямого доступа. Выходные сигналы подтверждения прямого доступа ППД2, ППД3 являются ответными по отношению к ЗПД2, ЗПД3. Они вырабатываются микросхемой в соответствии с приоритетами внешних устройств
</td>
</tr>
<tr>
<td valign="top">
15
</td>
<td valign="top">
ППД3<br>
(DACK3)</td>
<td valign="top">
Выход
</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
16
</td>
<td valign="top">
ЗПД3<br>
(DRQ3)</td>
<td valign="top">
Вход
</td>
<td valign="top">
Запрос прямого доступа. Входные сигналы ЗПД0...ЗПД3 поступают асинхронно из внешних устройств и воспринимаются микросхемой как запросы на обмен с ЗУ
</td>
</tr>
<tr>
<td valign="top">
17
</td>
<td valign="top">
ЗПД2<br>
(DRQ2)</td>
<td valign="top">
Вход
</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
18
</td>
<td valign="top">
ЗПД1<br>
(DRQ1)</td>
<td valign="top">
Вход
</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
19
</td>
<td valign="top">
ЗПД0<br>
(DRQ0)</td>
<td valign="top">
Вход
</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
20
</td>
<td valign="top">
Общий<br>
(GND)</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
21
</td>
<td valign="top">
D7
</td>
<td valign="top">
Вход/выход
</td>
<td valign="top">
Шина данных
</td>
</tr>
<tr>
<td valign="top">
22
</td>
<td valign="top">
D6
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
23
</td>
<td valign="top">
D5
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
24
</td>
<td valign="top">
ППД1<br>
(DACK1)</td>
<td valign="top">
Выход
</td>
<td valign="top">
Подтверждение прямого доступа. Выходные сигналы подтверждения прямого доступа ППД0, ППД1 являются ответными по отношению к ЗПД0, ЗПД1. Они вырабатываются микросхемой в соответствии с приоритетами внешних устройств
</td>
</tr>
<tr>
<td valign="top">
25
</td>
<td valign="top">
ППД0<br>
(DACK0)</td>
<td valign="top">
Выход
</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
26
</td>
<td valign="top">
D4
</td>
<td valign="top">
Вход/выход
</td>
<td valign="top">
Шина данных
</td>
</tr>
<tr>
<td valign="top">
27
</td>
<td valign="top">
D3
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
28
</td>
<td valign="top">
D2
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
29
</td>
<td valign="top">
D1
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
30
</td>
<td valign="top">
D0
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
31
</td>
<td valign="top">
Пит<br>
(+U)</td>
<td valign="top">&nbsp;

</td>
<td valign="top">
БИС ПДП имеет один номинал напряжения питания +5 В
</td>
</tr>
<tr>
<td valign="top">
32
</td>
<td valign="top">
A0
</td>
<td valign="top">
Вход/выход
</td>
<td valign="top">
Шина адреса
</td>
</tr>
<tr>
<td valign="top">
33
</td>
<td valign="top">
A1
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
34
</td>
<td valign="top">
A2
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
35
</td>
<td valign="top">
A3
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
36
</td>
<td valign="top">
КС<br>
(TC)</td>
<td valign="top">
Выход
</td>
<td valign="top">
Конец счета. Выходной сигнал КС вырабатывается при установке в нуль 14-разрядного регистра количества циклов и указывает периферийным устройствам, что данный цикл ПД последний
</td>
</tr>
<tr>
<td valign="top">
37
</td>
<td valign="top">
A4
</td>
<td valign="top">
Выход
</td>
<td valign="top">
Шина адреса
</td>
</tr>
<tr>
<td valign="top">
38
</td>
<td valign="top">
A5
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
39
</td>
<td valign="top">
A6
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
<tr>
<td valign="top">
40
</td>
<td valign="top">
A7
</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
</tr>
</table>
<br>
<p>Схема приема запросов СПЗ предназначена для приема и привязки несинхронных сигналов запросов на организацию прямого доступа к памяти от четырех устройств, а также выдачи ответных сигналов подтверждения. Каждый из четырех каналов связан с БИС ПДП отдельными линиями запросов и подтверждения прямого доступа. Выдача ответного сигнала подтверждения для соответствующего канала происходит в зависимости от его приоритета.</p>
<p>Внутреннее запоминающее устройство микросхемы ВЗУ предназначено для хранения начального адреса и числа циклов ПД для каждого канала в 16-разрядных регистрах адреса РгА и циклов РгЦ соответственно. РгА загружается адресом первой ячейки памяти, к которой должно быть обращение. Младшие 14 разрядов РгЦ указывают число циклов ПД (минус один) до конца счета (до появления сигнала КС}. Разряды 14-й и 15-й РгЦ указывают на вид обмена данными при ПД (табл. 2).</p>
<p>В блоке ВЗУ происходит формирование массива адресов инкрементированием текущего адреса. Младший байт адреса А7...А0 помещается в буфер адреса БА, старший байт (А15...А8} - на буфер данных БД. Старший байт адреса должен быть защелкнут во внешнем регистре по сигналу СтрА.</p>
<p>Буфер данных БД представляет собой 8-разрядное устройство, обеспечивающее двунаправленный обмен информацией между БИС и системной шиной данных. Информация, поступающая на БД с системной шины данных, передается в регистр установки режимов либо в ЗУ. С внутренней шины данных на ШД, поступает информация о регистрах адреса, количества циклов, состояния БИС. В течение циклов ПД выдаются старшие восемь разрядов адреса памяти.</p>
<p>Буфер адреса БА предназначен для приема и выдачи адреса памяти либо одного из внутренних регистров схемы. БА разделен на две части. Адресные линии А0...А3 в состоянии программирования указывают номер регистра, инициализированного для обмена. При обслуживании циклов ПД эти линии являются входными и по ним передаются четыре младших разряда адреса памяти.</p>
<p>Адресные линии А4...А7 - всегда выходные. Информация на них соответствует разрядам генерируемого адреса памяти.</p>
<p>Последовательностью операций в течение циклов ПД управляет устройство управления УУ.</p>
<p>Схема выработки сигналов Запись-Чтение СВС осуществляет прием, формирование и выдачу сигналов, обеспечивающих обмен информации между процессором и микросхемой - с одной стороны, и памятью и периферийными устройствами - с другой.</p>
<p>Регистр установки режимов РгР хранит информацию о режимах работы БИС, к которым относятся "Автозагрузка", "Конец счета-стоп", "Удлиненная запись", "Обычная запись", "Циклический сдвиг приоритета" и "Фиксированный приоритет".</p>
<p>РгР обычно загружается после установки РгА и РгЦ и сбрасывается подачей сигнала Уст.</p>
<p>Разряды 0...3 РгР разрешают работу соответствующего канала. Разряды 4...7 обеспечивают соответствующий режим работы БИС. Так, при записи "1" в разряд 4 РгР приоритет каждого канала изменяется.</p>
<p>Обслуженный канал будет иметь самый низкий приоритет. Порядок обслуживания каналов установливается в соответствии с их номерами 0&gt;&gt;1&gt;2&gt;3&gt;0. Если разряд 4 РгР установлен в "0", то каждый канал будет иметь фиксированный приоритет. Так, канал 0 имеет наивысший приоритет, а канал 3 - самый низкий. При записи "1" в разряд 5 РгР устанавливается режим "Удлиненная запись". В этом режиме продолжительность сигналов ЗпП и Зп В/В увеличивается при отсутствии сигнала готовности внешнего устройства. При этом БИС входит в состояние ожидания.</p>
<p>При записи "1" в разряд 6 РгР устанавливается режим "Конец счета - стоп". В этом случае после появления сигнала КС обслуженный канал окажется запрещенным. Если необходимо продолжить обслуживание данного канала, перепрограммируют его разряд разрешения. При "0" в разряде РгР появление сигнала КС не запрещает повторное обслуживание канала.</p>
<p>При "1" в разряде 7 РгР устанавливается режим "Автозагрузка", позволяющий каналу 2 повторно пропустить массив данных или связать ряд массивов без программного вмешательства.</p>
<p>Регистры канала 3 хранят информацию для переустановки регистров канала 2. После передачи первого массива и появления сигнала К.С содержимое регистров канала 3 передается в соответствующие регистры канала 2. Каждый раз, когда в регистрах канала 2 происходит "подмена" данных информацией регистров канала 3, устанавливается разряд "Флаг обновления данных" в регистре состояния каналов.</p>
<p>Регистр состояния каналов РгС указывает номер канала, который достиг конца счета. Кроме того, в РгС входит разряд "Флаг обновления данных", описанный выше.</p>
<p>В процессе функционирования в составе микропроцессорной системы микросхема может находиться в одном из следующих состояний: исходном, программирования, ожидания, обслуживания.</p>
<p>В исходное состояние микросхему переводит внешний сигнал Уст. В этом состоянии маскируются все запросы каналов ПД, а буферы А0...А3 переводятся в состояние приема информации. В состоянии программирования МП имеет доступ к внутренним регистрам выбранного канала в соответствии с табл. 2 и 3.</p>
<p>В состоянии ожидания микросхема находится либо от момента окончания программирования до выдачи сигнала ППД, либо в промежутках между циклами ПД.</p>
<p>После получения от МП сигнала ПЗхв при наличии сигнала запроса микросхема вырабатывает сигнал ППД и переходит в состояние обслуживания, в котором системные шины находятся под управлением БИС ПДП.</p>
<p>Таблица 2. Адресация регистров</p>

<table cellspacing="0"  >
<tr>
<th valign="top">
A3
</th>
<th valign="top">
A2
</th>
<th valign="top">
A1
</th>
<th valign="top">
A0
</th>
<th valign="top">
Операция
</th>
<th valign="top">
Регистр
</th>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
Зп
</td>
<td valign="top">
Канал 0, начальный адрес
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
Зп
</td>
<td valign="top">
Канал 0, количество циклов
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
Зп
</td>
<td valign="top">
Канал 1, начальный адрес
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
1
</td>
<td valign="top">
Зп
</td>
<td valign="top">
Канал 1, количество циклов
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
Чт
</td>
<td valign="top">
Канал 2, начальный адрес
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
Зп
</td>
<td valign="top">
Канал 2, количество циклов
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
Чт
</td>
<td valign="top">
Канал 3, начальный адрес
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
1
</td>
<td valign="top">
1
</td>
<td valign="top">
Зп
</td>
<td valign="top">
Канал 3, количество циклов
</td>
</tr>
<tr>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
Чт
</td>
<td valign="top">
Чтение РгС
</td>
</tr>
<tr>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
Зп
</td>
<td valign="top">
Запись в РгР
</td>
</tr>
</table>
<br>
<h2>Последовательность программирования контроллера</h2>
<p>Для начала следует запрограммировать РгА и РгЦ выбранного канала (или выбранных каналов).</p>
<p>Таблица 3. Последовательность записи регистров адреса и циклов</p>

<table cellspacing="0"  >
<tr>
<th valign="top">
A3
</th>
<th valign="top">
A2
</th>
<th valign="top">
A1
</th>
<th valign="top">
A0
</th>
<th valign="top">
Операция
</th>
<th valign="top">
Регистр
</th>
</tr>
<tr>
<td valign="top">
0
</td>
<td colspan="2" valign="top">
Номер канала
</td>
<td valign="top">
0
</td>
<td valign="top">
Зп
</td>
<td valign="top">
Запись младшего байта начального адреса (A0...A7)
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td colspan="2" valign="top">&nbsp;

</td>
<td valign="top">
0
</td>
<td valign="top">
Зп
</td>
<td valign="top">
Запись старшего байта начального адреса (A8...A15)
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td colspan="2" valign="top">&nbsp;

</td>
<td valign="top">
1
</td>
<td valign="top">
Зп
</td>
<td valign="top">
Запись младшего байта количества циклов (C0...C7)
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td colspan="2" valign="top">&nbsp;

</td>
<td valign="top">
1
</td>
<td valign="top">
Зп
</td>
<td valign="top">
Запись старших шести бит количества циклов (C8...C13) плюс два бита вида обмена данными (C14, C15)
</td>
</tr>
</table>
<p>Запись в каждый регистр проводится в два этапа - младший, затем старший байт адреса.</p>
<p>Таблица 4. Вид обмена данными</p>

<table cellspacing="0"  >
<tr>
<th valign="top">
C14
</th>
<th valign="top">
C15
</th>
<th valign="top">
Вид обмена
</th>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
Цикл проверки ПД
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
Цикл записи ПД
</td>
</tr>
<tr>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
Цикл чтения ПД
</td>
</tr>
<tr>
<td valign="top">
1
</td>
<td valign="top">
1
</td>
<td valign="top">
Запрещенная комбинация
</td>
</tr>
</table>
<p>Разрешить работу контроллера ПДП теперь можно, установив в РгР соответствующий бит разрешения каналов вместе с атрибутами режима работы контроллера.</p>
<p>Таблица 5. Формат регистра режимов</p>

<table cellspacing="0"  >
<tr>
<th valign="top">
Ст. б.
</th>
<th colspan="6" valign="top">&nbsp;

</th>
<th valign="top">
Мл.б.
</th>
</tr>
<tr>
<td valign="top">
7
</td>
<td valign="top">
6
</td>
<td valign="top">
5
</td>
<td valign="top">
4
</td>
<td valign="top">
3
</td>
<td valign="top">
2
</td>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
</tr>
<tr>
<td valign="top">
Установка автозагрузки
</td>
<td valign="top">
Установка КС-Стоп
</td>
<td valign="top">
Установка удлиненной записи
</td>
<td valign="top">
Установка циклического сдвига приоритета
</td>
<td colspan="4" valign="top">
Разрешение ПД
</td>
</tr>
<tr>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
<td valign="top">
Для канала 3
</td>
<td valign="top">
Для канала 2
</td>
<td valign="top">
Для канала 1
</td>
<td valign="top">
Для канала 0
</td>
</tr>
</table>
<p>В процессе работы можно контролировать выполнение процесса прямого доступа к памяти посредством периодического чтения РгС.</p>
<p>Таблица 6. Формат регистра статуса</p>

<table cellspacing="0"  >
<tr>
<th valign="top">
Ст.б.
</th>
<th colspan="6" valign="top">&nbsp;

</th>
<th valign="top">
Мл.б.
</th>
</tr>
<tr>
<td valign="top">
7
</td>
<td valign="top">
6
</td>
<td valign="top">
5
</td>
<td valign="top">
4
</td>
<td valign="top">
3
</td>
<td valign="top">
2
</td>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
Флаг обновления данных
</td>
<td colspan="4" valign="top">
КС-стоп
</td>
</tr>
<tr>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
<td valign="top">&nbsp;

</td>
<td valign="top">
Для канала 3
</td>
<td valign="top">
Для канала 2
</td>
<td valign="top">
Для канала 1
</td>
<td valign="top">
Для канала 0
</td>
</tr>
</table>
<h2>Пример программирования</h2>
<p>В одноплатном компьютере "Радио-86РК", описанном в журнале "Радио", контроллер ПДП используется для передачи кодов отображаемых символов из экранной области памяти в контроллер дисплея. Данная задача требует программирования контроллера ПДП с автозагрузкой (табл. 7).</p>
<p>Таблица 7. Пример программирования контроллера ПДП</p>

<table cellspacing="0"  >
<tr>
<th valign="top">
A3
</th>
<th valign="top">
A2
</th>
<th valign="top">
A1
</th>
<th valign="top">
A0
</th>
<th valign="top">
Операция
</th>
<th valign="top">
Данные
</th>
<th valign="top">
Комментарий
</th>
</tr>
<tr>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
Зп
</td>
<td valign="top">
10000000 (80H)
</td>
<td valign="top">
В РгР установили флаг автозагрузки, чтобы начальный адрес записался в регистр адреса третьего канала
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
Зп
</td>
<td valign="top">
11010000 (D0H)
</td>
<td valign="top">
Младший байт адреса
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
Зп
</td>
<td valign="top">
01110110 (76H)
</td>
<td valign="top">
Старший байт адреса
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
Зп
</td>
<td valign="top">
00100011 (23H)
</td>
<td valign="top">
Младший байт количества циклов
</td>
</tr>
<tr>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
1
</td>
<td valign="top">
Зп
</td>
<td valign="top">
01001001 (49H)
</td>
<td valign="top">
Старший байт количества циклов (09H) и вид обмена - чтение
</td>
</tr>
<tr>
<td valign="top">
1
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
0
</td>
<td valign="top">
Зп
</td>
<td valign="top">
10100100 (A4H)
</td>
<td valign="top">
В РгР установили флаги: автозагрузка, удлиненная запись, разрешение работы канала 2
</td>
</tr>
</table>
<p>Все. Теперь контроллер ПДП циклически пересылает область памяти 76D0H-7FF3H в контроллер дисплея, приостанавливая на это время работу процессора.</p>
<p>Отметим, что в таком варианте использования контроллера ПДП не требуется проводить операций чтения. Это использовали разработчики компьютера "Радио-86РК", совместив в адресном пространстве контроллер ПДП (только запись) и ПЗУ (только чтение).</p>
